name = "horseman"
compatibility_date = "2022-03-30"
type = "javascript"
account_id = "<ACCOUNTID>"
workers_dev = false

kv_namespaces = [
  { binding = "INDEXKV", id = "<INDEXKVID>", preview_id = "" },
  { binding = "CONTENTKV", id = "<CONTENTKVID>", preview_id = "" },
]

[vars]
HORSEMAN_VERSION = "1.0.0"
# You need to deploy this Worker (https://github.com/AggressivelyMeows/password-hashing) to your account.
# MAKE SURE TO RUN `npm run generate` TO GET AN ACCESS KEY.
# Once done, put the domain its running under below:
PASSWORD_HASHER_DOMAIN = "password-hashing.sponsus.workers.dev" # The domain of the password hasher service.

# Do not forget to run:
# npx wrangler secret put PASSWORD_ACCESS_KEY
# Then paste the access key generated by the password hashing Worker.

ALLOW_SIGNUPS = true # Set to false to disable signups.

# EVERYTHING BELOW THIS LINE SHOULDNT NEED TO BE CHANGED.
# ------------------------------------------------------

[durable_objects]
bindings = [
  { name = "IndexWriter", class_name = "WriterDO" }
]

[[migrations]]
tag = "v1" # Should be unique for each entry
new_classes = ["WriterDO"]

[miniflare]
kv_persist = true # Defaults to ./.mf/kv

[build]
command = "npm run build"
[build.upload]
format = "modules"
main='index.js'